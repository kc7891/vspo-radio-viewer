async function fetchRadioUrls(){try{const e="https://fc.vspo.jp/ja/gallery/category/radio",r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch the URL: ${e}`);const t=await r.text(),a=(new DOMParser).parseFromString(t,"text/html"),o=Array.from(a.querySelectorAll("a"));return o.map((e=>e.href)).filter((e=>e.startsWith("https://fc.vspo.jp/ja/gallery/radio"))).filter(((e,r,t)=>t.indexOf(e)===r)).reverse()}catch(e){return console.error("Error fetching radio URLs:",e),[]}}async function fetchAudioTags(e){try{const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch the URL: ${e}`);const t=await r.text(),a=new DOMParser,o=a.parseFromString(t,"text/html").querySelectorAll("audio");return Array.from(o).map((e=>e.outerHTML))}catch(e){return console.error("Error fetching audio tags:",e),[]}}function getRadioNumbers(e){return e.map((e=>{const r=e.match(/radio(\d+)/);return r?`radio${r[1]}`:null})).filter(Boolean)}function renderPlayer(e,r){const t=document.createElement("div"),a=[];e.forEach(((e,o)=>{const n=document.createElement("div"),i="played"===localStorage.getItem(`radio-${e}`)?'<span style="color: green; margin-left: 10px;">再生済み</span>':"";n.innerHTML=`<div>${e}${i}</div>${r[o]}`;const c=n.querySelector("audio");a.push({audio:c,row:n,number:e}),t.appendChild(n)})),document.body.appendChild(t),a.forEach(((e,r)=>{const{audio:t,row:o,number:n}=e;t.addEventListener("ended",(()=>{localStorage.setItem(`radio-${n}`,"played");const e=o.querySelector("div");e.querySelector("span")||(e.innerHTML+='<span style="color: green; margin-left: 10px;">再生済み</span>'),r<a.length-1&&a[r+1].audio.play()}))}))}async function main(){const e=await fetchRadioUrls();renderPlayer(getRadioNumbers(e),await Promise.all(e.map((async e=>(await fetchAudioTags(e))[0]))))}main();